<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>日本購物與旅遊清單 APP</title>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <!-- 載入 Font Awesome 圖標 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            padding-bottom: 90px;
            -webkit-tap-highlight-color: transparent;
        }
        
        html { scroll-behavior: smooth; }

        /* 分頁切換動畫 */
        .tab-content {
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .tab-content.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .card-img {
            height: 200px; /* 稍微增高讓圖片更清晰 */
            object-fit: cover;
            object-position: center;
            width: 100%;
            display: block;
            transition: transform 0.3s ease;
        }
        
        .card:hover .card-img {
            transform: scale(1.03); /* 懸停時輕微放大 */
        }

        /* 底部導航欄 */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
            z-index: 50;
            padding-bottom: env(safe-area-inset-bottom);
            border-top: 1px solid #e2e8f0;
        }
        .nav-item {
            color: #94a3b8;
            transition: all 0.2s;
        }
        .nav-item.active {
            color: #ec4899; /* Pink-500 */
            transform: translateY(-2px);
        }
        .nav-item.active i {
            filter: drop-shadow(0 2px 4px rgba(236, 72, 153, 0.3));
        }

        /* 讓 Modal 內的文字可以換行 */
        .whitespace-pre-line {
            white-space: pre-line;
        }
    </style>
</head>
<body>

    <div class="max-w-2xl mx-auto min-h-screen bg-white shadow-2xl relative overflow-hidden">
        
        <!-- Header -->
        <header class="bg-gradient-to-br from-pink-500 to-rose-600 text-white p-6 pt-10 pb-6 shadow-lg sticky top-0 z-40">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <h1 class="text-2xl font-extrabold tracking-tight">Japan Trip 🇯🇵</h1>
                    <p class="text-pink-100 text-xs mt-1 font-medium tracking-wide">購物清單 & 旅遊攻略</p>
                </div>
                <div class="text-right bg-white/10 p-2 rounded-xl backdrop-blur-sm border border-white/20">
                    <span class="text-xl font-bold block leading-none" id="visible-count">0</span>
                    <span class="text-[10px] text-pink-100">顯示項目</span>
                </div>
            </div>

            <!-- 搜尋欄 -->
            <div class="relative">
                <i class="fa-solid fa-magnifying-glass absolute left-3 top-3 text-pink-200"></i>
                <input type="text" id="search-input" placeholder="搜尋：牙膏、東京車站、7-11..." class="w-full bg-white/20 backdrop-blur-md text-white placeholder-pink-200 pl-10 pr-4 py-2.5 rounded-xl border border-white/30 focus:outline-none focus:bg-white/30 focus:border-white/50 transition-all text-sm shadow-inner" onkeyup="applyFilters()">
                <button id="clear-search" class="hidden absolute right-3 top-2.5 text-pink-200 hover:text-white transition-colors" onclick="resetSearch()">
                    <i class="fa-solid fa-circle-xmark text-lg"></i>
                </button>
            </div>
        </header>

        <!-- 內容區塊 -->
        <main class="px-4 py-4 pb-24 bg-slate-50 min-h-[80vh]">
            
            <!-- 1. 美妝藥妝 -->
            <section id="beauty" class="tab-content active">
                <div class="flex items-center mb-3 px-1 sticky top-[130px] z-30 py-2 bg-slate-50/95 backdrop-blur-sm transition-all duration-300">
                    <span class="w-1.5 h-5 bg-pink-500 rounded-full mr-2 shadow-sm"></span>
                    <h2 class="text-lg font-bold text-gray-800">美妝 & 藥妝</h2>
                </div>
                <!-- 改為 RWD 網格：手機單欄，中螢幕雙欄 -->
                <div id="beauty-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </section>

            <!-- 2. 服飾穿搭 -->
            <section id="fashion" class="tab-content">
                <div class="flex items-center mb-3 px-1 sticky top-[130px] z-30 py-2 bg-slate-50/95 backdrop-blur-sm transition-all duration-300">
                    <span class="w-1.5 h-5 bg-indigo-500 rounded-full mr-2 shadow-sm"></span>
                    <h2 class="text-lg font-bold text-gray-800">服飾 & 穿搭</h2>
                </div>
                <div id="fashion-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </section>

            <!-- 3. 美食伴手禮 -->
            <section id="food" class="tab-content">
                <div class="flex items-center mb-3 px-1 sticky top-[130px] z-30 py-2 bg-slate-50/95 backdrop-blur-sm transition-all duration-300">
                    <span class="w-1.5 h-5 bg-amber-500 rounded-full mr-2 shadow-sm"></span>
                    <h2 class="text-lg font-bold text-gray-800">美食 & 伴手禮</h2>
                </div>
                <div id="food-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </section>

            <!-- 4. 景點與其他 -->
            <section id="travel" class="tab-content">
                <div class="flex items-center mb-3 px-1 sticky top-[130px] z-30 py-2 bg-slate-50/95 backdrop-blur-sm transition-all duration-300">
                    <span class="w-1.5 h-5 bg-emerald-500 rounded-full mr-2 shadow-sm"></span>
                    <h2 class="text-lg font-bold text-gray-800">景點 & 雜貨</h2>
                </div>
                <div id="travel-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </section>

            <!-- 無搜尋結果提示 -->
            <div id="no-results" class="hidden flex flex-col items-center justify-center py-20 text-gray-400">
                <div class="bg-gray-100 p-6 rounded-full mb-4 shadow-inner">
                    <i class="fa-solid fa-box-open text-4xl text-gray-300"></i>
                </div>
                <p class="text-sm font-medium">找不到相關商品</p>
                <button onclick="resetSearch()" class="mt-6 px-6 py-2 bg-pink-500 text-white rounded-full text-sm font-bold shadow-md hover:bg-pink-600 transition">清除搜尋</button>
            </div>

        </main>
    </div>

    <!-- 底部導航欄 -->
    <nav class="bottom-nav">
        <div class="max-w-2xl mx-auto flex justify-between items-center px-6 py-2">
            <button onclick="switchTab('beauty')" class="nav-item active flex flex-col items-center w-1/4 py-1 group" data-tab="beauty">
                <i class="fa-solid fa-wand-magic-sparkles text-xl mb-1 group-active:scale-90 transition-transform"></i>
                <span class="text-[10px] font-bold">美妝藥妝</span>
            </button>
            <button onclick="switchTab('fashion')" class="nav-item flex flex-col items-center w-1/4 py-1 group" data-tab="fashion">
                <i class="fa-solid fa-shirt text-xl mb-1 group-active:scale-90 transition-transform"></i>
                <span class="text-[10px] font-bold">服飾穿搭</span>
            </button>
            <button onclick="switchTab('food')" class="nav-item flex flex-col items-center w-1/4 py-1 group" data-tab="food">
                <i class="fa-solid fa-cookie-bite text-xl mb-1 group-active:scale-90 transition-transform"></i>
                <span class="text-[10px] font-bold">美食伴手禮</span>
            </button>
            <button onclick="switchTab('travel')" class="nav-item flex flex-col items-center w-1/4 py-1 group" data-tab="travel">
                <i class="fa-solid fa-torii-gate text-xl mb-1 group-active:scale-90 transition-transform"></i>
                <span class="text-[10px] font-bold">景點雜貨</span>
            </button>
        </div>
    </nav>

    <!-- Modal 詳情彈窗 -->
    <div id="modal" class="fixed inset-0 z-[60] hidden" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900/70 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>
        <div class="fixed inset-0 flex items-center justify-center p-4 pointer-events-none">
            <div class="bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-2xl transform transition-all scale-95 opacity-0 pointer-events-auto flex flex-col max-h-[85vh]" id="modal-panel">
                <div class="relative h-64 shrink-0 bg-gray-100">
                    <img id="modal-img" src="" alt="" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                    <button onclick="closeModal()" class="absolute top-4 right-4 bg-white/20 hover:bg-white/40 text-white rounded-full p-2 w-9 h-9 flex items-center justify-center backdrop-blur-md border border-white/30 z-10 transition-transform hover:scale-110">
                        <i class="fa-solid fa-xmark text-lg"></i>
                    </button>
                    <div class="absolute bottom-0 left-0 right-0 p-5">
                        <div id="modal-tags" class="flex flex-wrap gap-2 mb-2"></div>
                        <h3 id="modal-title" class="text-2xl font-bold text-white leading-snug shadow-sm tracking-tight"></h3>
                    </div>
                </div>
                <div class="p-6 overflow-y-auto">
                    <div class="flex flex-col gap-3 mb-6">
                        <!-- 類別標籤 -->
                        <div class="flex items-center gap-2">
                            <span id="modal-category-badge" class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold shadow-sm"></span>
                        </div>
                        
                        <!-- 購買地點 (重點強調) -->
                        <div class="bg-gray-50 p-3 rounded-lg border-l-4 border-pink-500 shadow-sm">
                            <p class="text-xs text-gray-500 font-bold mb-1 uppercase tracking-wider">WHERE TO BUY</p>
                            <p id="modal-location-text" class="text-gray-800 font-bold text-sm"></p>
                        </div>
                    </div>

                    <div class="prose prose-sm text-gray-600 leading-relaxed text-base whitespace-pre-line mb-8">
                        <p id="modal-desc"></p>
                    </div>
                    
                    <button class="w-full bg-gray-900 text-white py-4 rounded-xl text-sm font-bold shadow-lg hover:bg-gray-800 active:scale-[0.98] transition flex items-center justify-center gap-2" onclick="closeModal()">
                        <i class="fa-solid fa-check"></i> 知道了 / 標記為已買
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 資料庫：提高圖片解析度，避免模糊
        const items = [
            // === 美妝藥妝 (Beauty) ===
            { 
                category: 'beauty', 
                title: '第一三共 Clean Dental 牙膏全系列', 
                location: '📍 各大藥妝店 (松本清、大國、SunDrug)',
                desc: '針對不同口腔問題的專業護理牙膏：\n\n🔴 紅色 (經典全效)：針對牙齦腫脹、出血及牙周病預防。味道帶鹹味。\n🟢 綠色 (敏感護理)：溫和護理，防冷熱酸痛刺激。\n🟡 黃色 (口臭護理)：檸檬清香，針對口臭護理與牙菌斑防護。\n🩷 粉色 (美白護理)：去除牙漬、咖啡漬、茶漬。\n🔵 藍色 (無研磨劑)：凝膠狀，適合電動牙刷或極敏感牙齒。\n\n💡 牙周病軟膏：紅色小條管狀，直接塗抹在紅腫牙齦上。', 
                tags: ['牙膏', '必買', '牙周病'], 
                img: 'image/clean.jpg' 
            },
            { 
                category: 'beauty', 
                title: '齒磨堂 (Hamigaki Do) 牙膏系列', 
                location: '📍 Loft、唐吉訶德、部分大型藥妝店',
                desc: '職人級的高級牙膏系列：\n\n⚪ 白色 (極致淨白)：含有兩倍美白成分，溫和去除牙漬，修復琺瑯質。\n🟢 綠色 (頂級去垢)：含5種藥用成分，對應口臭、牙齦問題。吃完大蒜刷它超有效！\n🟣 紫色 (璀璨淨白)：含3倍美白成分，針對重度茶漬、咖啡漬、紅酒漬。', 
                tags: ['牙膏', '職人', '美白'], 
                img: 'image/齒磨堂.jpg' 
            },
            { 
                category: 'beauty', 
                title: '小林製藥 扁桃腺噴霧 (Harenasu)', 
                location: '📍 各大藥妝店 (藥品區)',
                desc: '喉嚨痛救星！喉嚨卡卡、吞嚥困難時直接噴患部，涼感速效，隔天好轉很多。', 
                tags: ['藥品', '喉嚨'], 
                img: 'image/小林製藥扁桃腺噴霧.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Kowa 鼻炎膠捲 (Marshmallow)', 
                location: '📍 各大藥妝店 (鼻炎藥區)',
                desc: '放在舌上融化的藍色薄膜，隨身攜帶方便，號稱快速停止流鼻水的神器。', 
                tags: ['藥品', '鼻炎'], 
                img: 'image/Kowa 鼻炎膠捲.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Zukkinon 塗抹式頭痛藥膏', 
                location: '📍 各大藥妝店 (痠痛貼布/藥品區)',
                desc: '塗抹式藥膏，像護唇膏一樣轉出來，專治肩頸僵硬引起的頭痛，塗在肩膀脖子上。', 
                tags: ['藥品', '痠痛'], 
                img: 'image/Zukkinon塗抹式頭痛藥膏.jpg' 
            },
            { 
                category: 'beauty', 
                title: '腳後跟保濕護理襪 (Kakato-chan)', 
                location: '📍 藥妝店 (足部護理區)',
                desc: '睡覺時穿著，內含保濕成分，改善腳跟乾裂粗糙，隔天變超嫩。', 
                tags: ['保養', '足部'], 
                img: 'image/腳後跟保濕護理襪 (Kakato-chan).jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Quality 1st 眼膜 (紅色)', 
                location: '📍 藥妝店、唐吉訶德',
                desc: 'Derma Laser Super VC+Retinol (紅色包裝)，針對眼周細紋、黑眼圈，緊緻效果好。', 
                tags: ['面膜', '抗老'], 
                img: 'image/Quality 1st 眼膜 (紅色).jpg' 
            },
            { 
                category: 'beauty', 
                title: 'PDC 酒粕面膜', 
                location: '📍 藥妝店、唐吉訶德、Loft',
                desc: '熊本河津酒造酒粕使用，洗掉後皮膚像豆腐一樣嫩滑，去黃提亮效果驚人。', 
                tags: ['面膜', '美白'], 
                img: 'image/PDC 酒粕面膜.jpg' 
            },
            { 
                category: 'beauty', 
                title: '毛穴小町 面膜', 
                location: '📍 藥妝店',
                desc: '綠色包裝，針對毛孔粗大、角質護理。', 
                tags: ['面膜', '毛孔'], 
                img: 'image/毛穴小町 面膜.jpg' 
            },
            { 
                category: 'beauty', 
                title: '怡麗絲爾 (ELIXIR) 晚安凍膜', 
                location: '📍 藥妝店 (資生堂櫃)、百貨專櫃',
                desc: '睡前塗抹，針對毛孔粗大，早上起來皮膚平滑。有原味和限定香味。', 
                tags: ['保養', '毛孔'], 
                img: 'image/怡麗絲爾 (ELIXIR) 晚安凍膜.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'IHADA 藥用乳液', 
                location: '📍 藥妝店 (敏感肌專區)',
                desc: '資生堂旗下，高精製凡士林配合，保濕修復力強，換季敏感肌大推。', 
                tags: ['保養', '敏感肌'], 
                img: 'image/IHADA 藥用乳液.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'CEZANNE 藍色飾底乳 & 遮瑕', 
                location: '📍 藥妝店 (CEZANNE 開架)',
                desc: '05號藍色飾底乳：提亮效果比舊款更清透，改善暗沉蠟黃。\n02號遮瑕膏：質地滋潤不卡紋。', 
                tags: ['彩妝', '平價'], 
                img: 'image/CEZANNE 藍色飾底乳 & 遮瑕.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Excel 精華遮瑕液', 
                location: '📍 藥妝店、Loft、Plaza',
                desc: '質地滋潤不卡紋，遮蓋力好，網友推薦 02 號色。', 
                tags: ['彩妝', '遮瑕'], 
                img: 'image/Excel 精華遮瑕液.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Biore 補妝吸油面紙', 
                location: '📍 藥妝店、便利商店',
                desc: '紫色/紅色包裝，含有化妝水成分，吸油同時補妝，按壓後妝容服貼。', 
                tags: ['工具', '補妝'], 
                img: 'image/Biore 補妝吸油面紙.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Wrinkle Double 精華棒', 
                location: '📍 藥妝店',
                desc: '粉色棒狀，針對眼下細紋、黑眼圈的保濕精華棒，帶妝也能用，隨時補水。', 
                tags: ['保養', '急救'], 
                img: 'image/Wrinkle Double 精華棒.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Sofina iP 去黑頭凝膠', 
                location: '📍 藥妝店 (Sofina 櫃)',
                desc: '黑色軟管，洗完臉後針對黑頭粉刺按摩，近期熱門新品。', 
                tags: ['保養', '黑頭'], 
                img: 'image/Sofina iP 去黑頭凝膠.jpg' 
            },
            { 
                category: 'beauty', 
                title: '小林製藥 口氣清新丸 (Breath Care)', 
                location: '📍 藥妝店 (口腔護理區)、便利商店',
                desc: '吞服型膠囊，從胃部去除食物異味（如大蒜味）。', 
                tags: ['藥品', '口氣'], 
                img: 'image/小林製藥 口氣清新丸 (Breath Care).jpg' 
            },
            { 
                category: 'beauty', 
                title: 'UHA味覺糖 保健食品 (Gummy Supple)', 
                location: '📍 藥妝店、唐吉訶德',
                desc: '軟糖形式好吃又有效。\n💜 紫色：鐵 & 葉酸 (防貧血)\n💛 黃色：維他命C', 
                tags: ['保健', '軟糖'], 
                img: 'image/UHA味覺糖 保健食品 (Gummy Supple).jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Svelty 分解酵母 (Pakkun)', 
                location: '📍 藥妝店 (減肥保健區)',
                desc: '吃大餐前吃，幫助分解澱粉糖分，消水腫。', 
                tags: ['保健', '瘦身'], 
                img: 'image/Svelty 分解酵母.jpg' 
            },
            { 
                category: 'beauty', 
                title: '濃密極細毛牙刷', 
                location: '📍 藥妝店 (牙刷區)',
                desc: '刷毛如雲朵般柔軟，深入齒縫，觸感超神奇。', 
                tags: ['工具', '牙刷'], 
                img: 'image/濃密極細毛牙刷.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'CANMAKE 心形蜜粉 (限定款)', 
                location: '📍 藥妝店、Loft',
                desc: '限定壓紋款，粉色提氣色，藍色提亮。外殼超可愛。', 
                tags: ['彩妝', '限定'], 
                img: 'image/CANMAKE 心形蜜粉 (限定款).jpg' 
            },
            { 
                category: 'beauty', 
                title: 'ReFa 愛心梳', 
                location: '📍 ReFa銀座精品店、GINZA SIX、部分百貨',
                desc: '推薦新品捲髮棒、直髮夾、愛心梳（有銀座限定色）。', 
                tags: ['美髮', '銀座'], 
                img: 'image/REFA.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'SHIRO 香氛系列', 
                location: '📍 澀谷 Scramble Square、表參道、部分百貨',
                desc: '白百合髮油、柚子保濕噴霧、皂香身體乳。味道高級，像大小姐身上的味道。', 
                tags: ['香氛', '美髮'], 
                img: 'image/SHIRO 香氛系列.jpg' 
            },
            { 
                category: 'beauty', 
                title: '&honey 瀏海定型棒', 
                location: '📍 藥妝店、Loft',
                desc: '像睫毛膏一樣的刷頭，整理碎髮神器，不會讓頭髮變硬條狀。', 
                tags: ['美髮', '定型'], 
                img: 'image/&honey 瀏海定型棒.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'KissMe 睫毛卸除液', 
                location: '📍 藥妝店 (彩妝區)',
                desc: '淺藍色管身，刷在睫毛上即可輕鬆卸除強力防水睫毛膏，不熏眼。', 
                tags: ['彩妝', '卸妝'], 
                img: 'image/KissMe 睫毛卸除液.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Kanebo 舒適洗顏皂霜', 
                location: '📍 藥妝店 (Kanebo櫃)、百貨專櫃',
                desc: 'Comfort Stretchy Wash，黑色軟管，牽絲質地，洗完不乾澀。', 
                tags: ['洗臉', '保濕'], 
                img: 'image/Kanebo 舒適洗顏皂霜.jpg' 
            },
            { 
                category: 'beauty', 
                title: 'Yoroshi 化妝堂 (護髮油)', 
                location: '📍 淺草仲見世通',
                desc: '必買護髮油、護手霜，有365種生日花紋包裝，適合送禮。', 
                tags: ['保養', '淺草'], 
                img: 'image/Yoroshi 化妝堂 (護髮油).jpg' 
            },

            // === 服飾穿搭 (Fashion) ===
            { 
                category: 'fashion', 
                title: 'Mont-bell 羽絨圍巾 & 外套', 
                location: '📍 Mont-bell 門市 (澀谷、新宿南口)',
                desc: '輕量保暖羽絨圍巾(冬季必備)、無領內搭羽絨衣(國民制服)。', 
                tags: ['配件', '保暖'], 
                img: 'image/Mont-bell 羽絨圍巾 & 外套.jpg' 
            },
            { 
                category: 'fashion', 
                title: 'COCA 平價服飾', 
                location: '📍 銀座店、LUMINE EST 新宿',
                desc: '價格平易近人，質地和版型超日系小清新，是 GU、UNIQLO 之外的好選擇。', 
                tags: ['女裝', '平價'], 
                img: 'image/COCA 平價服飾.jpg' 
            },
            { 
                category: 'fashion', 
                title: 'CITEN 金屬色包包', 
                location: '📍 United Arrows 門市 (澀谷、新宿)',
                desc: '金屬色雲朵包、扭蛋環保袋超紅，顏色選擇多，需包色！', 
                tags: ['包包', '潮牌'], 
                img: 'image/CITEN 金屬色包包.jpg' 
            },
            { 
                category: 'fashion', 
                title: 'Onitsuka Tiger (鬼塚虎)', 
                location: '📍 銀座店、新宿東口店',
                desc: '銀座店款式多，人也多，可能有特殊款。記得帶護照退稅。', 
                tags: ['鞋子', '退稅'], 
                img: 'image/Onitsuka Tiger (鬼塚虎).jpg' 
            },
            { 
                category: 'fashion', 
                title: 'Stussy 東京限定', 
                location: '📍 Stussy 門市 (澀谷、原宿)',
                desc: '東京限定款 Hoodie 和 T-shirt，經常補貨，潮流人士必搶。', 
                tags: ['潮牌', '限定'], 
                img: 'image/Stussy 東京限定.jpg' 
            },
            { 
                category: 'fashion', 
                title: 'GAP 寵物客製衣', 
                location: '📍 GAP 銀座旗艦店',
                desc: '可以刺繡寵物名字的 GAP 帽T，非常有紀念價值，還有很多貼布可選。', 
                tags: ['寵物', '客製'], 
                img: 'image/GAP 寵物客製衣.jpg' 
            },
            { 
                category: 'fashion', 
                title: 'ATSUGI 發熱絲襪', 
                location: '📍 藥妝店、唐吉訶德、Bic Camera',
                desc: '包裝上有大大的「溫」字。超薄發熱，冬天穿裙子必備，迪士尼抗寒神物。', 
                tags: ['襪子', '保暖'], 
                img: 'image/ATSUGI 發熱絲襪.jpg' 
            },
            { 
                category: 'fashion', 
                title: '光腿神器 (80丹)', 
                location: '📍 靴下屋 (Tabio)、藥妝店',
                desc: '80丹保暖假透肉，適合0-10度，自然不假白，膚色均勻。', 
                tags: ['襪子', '保暖'], 
                img: 'image/光腿神器 (80丹).jpg' 
            },
            { 
                category: 'fashion', 
                title: 'Gelato Pique 睡衣', 
                location: '📍 百貨公司 (Lumine EST, 澀谷Parco)',
                desc: '觸感超柔軟的家居服，日本買便宜很多，也有跟寶可夢等聯名款。', 
                tags: ['家居', '睡衣'], 
                img: 'image/Gelato Pique 睡衣.jpg' 
            },
            { 
                category: 'fashion', 
                title: 'Niko and... 花花毛衣', 
                location: '📍 Niko and... 原宿旗艦店',
                desc: '大花朵圖案毛衣，可愛復古風，旗艦店超大超好逛。', 
                tags: ['女裝', '穿搭'], 
                img: 'image/Niko and... 花花毛衣.jpg' 
            },
            { 
                category: 'fashion', 
                title: 'Princesse tam.tam', 
                location: '📍 UNIQLO TOKYO (銀座)',
                desc: 'Uniqlo姊妹牌，有花邊的發熱衣，質感很好，可當內搭露出。', 
                tags: ['內衣', '發熱衣'], 
                img: 'image/Princesse tam.tam.jpg' 
            },

            // === 美食伴手禮 (Food) ===
            { 
                category: 'food', 
                title: 'NewYork Perfect Cheese', 
                location: '📍 東京車站 1F 南通路',
                desc: '萬年排隊名店。起司奶油脆餅，鹹甜交織大人味。建議早上就要去排。', 
                tags: ['伴手禮', '起司'], 
                img: 'image/NewYork Perfect Cheese.jpg' 
            },
            { 
                category: 'food', 
                title: 'COCORIS 榛果夾心', 
                location: '📍 東京車站 1F Gransta',
                desc: '榛果與木莓夾心餅乾，包裝精緻，堅果控首選。', 
                tags: ['伴手禮', '榛果'], 
                img: 'image/COCORIS 榛果夾心.jpg' 
            },
            { 
                category: 'food', 
                title: 'N.Y.C. SAND 焦糖餅', 
                location: '📍 大丸東京店 1F',
                desc: '咬下會爆漿的奢華流心焦糖巧克力餅乾，排隊名店。', 
                tags: ['伴手禮', '焦糖'], 
                img: 'image/N.Y.C. SAND 焦糖餅.jpg'
            },
            { 
                category: 'food', 
                title: 'Butter Butler', 
                location: '📍 東京車站、新宿站 NEWoMan',
                desc: '奶油費南雪，外酥內濕潤，奶油香氣十足，經典不敗款。', 
                tags: ['伴手禮', '費南雪'], 
                img: 'image/Butter Butler.jpg' 
            },
            { 
                category: 'food', 
                title: 'BRULEE MERIZE', 
                location: '📍 東京車站 1F 八重洲北口',
                desc: '焦糖烤布蕾塔，東京車站新寵，表面炙燒焦糖脆皮，內餡香草卡士達。', 
                tags: ['伴手禮', '布蕾'], 
                img: 'image/BRULEE MERIZE.jpg' 
            },
            { 
                category: 'food', 
                title: 'Sugar Butter Tree (砂糖樹)', 
                location: '📍 7-11 (聯名款)、西武池袋、大丸東京',
                desc: '推薦 7-11 限定的麗莎卡斯柏聯名、史努比聯名款。', 
                tags: ['伴手禮', '聯名'], 
                img: 'image/Sugar Butter Tree (砂糖樹).jpg' 
            },
            { 
                category: 'food', 
                title: 'Very Ruby Cut', 
                location: '📍 品川站、東京站',
                desc: '紅寶石草莓果醬夾心餅乾，像寶石一樣的精緻甜點，女生最愛。', 
                tags: ['伴手禮', '草莓'], 
                img: 'image/Very Ruby Cut.jpg' 
            },
            { 
                category: 'food', 
                title: 'Butter State\'s', 
                location: '📍 大丸東京店、西武池袋',
                desc: '火山造型的奶油餅乾，濃濃奶油和可可香氣，有聖誕限定版。', 
                tags: ['甜點', '限定'], 
                img: 'image/Butter State.jpg' 
            },
            { 
                category: 'food', 
                title: 'Noix de Beurre', 
                location: '📍 銀座三越 B2、新宿伊勢丹 B1',
                desc: '現烤費南雪，外酥內濕潤，排隊名店，此生必吃費南雪。', 
                tags: ['伴手禮', '費南雪'], 
                img: 'image/Noix de Beurre.jpg' 
            },
            { 
                category: 'food', 
                title: 'Echire 艾許奶油', 
                location: '📍 澀谷 Scramble Square、丸之內 Brick Square',
                desc: '奶油界的LV，費南雪和瑪德蓮超級香，價格較高但值得。', 
                tags: ['伴手禮', '高級'], 
                img: 'image/Echire 艾許奶油.jpg' 
            },
            { 
                category: 'food', 
                title: 'Audrey 草莓花束', 
                location: '📍 日本橋高島屋、西武池袋',
                desc: 'Hello Berry，外型像花束，草莓乾配奶油，高顏值伴手禮。', 
                tags: ['伴手禮', '顏值'], 
                img: 'image/Audrey 草莓花束.jpg' 
            },
            { 
                category: 'food', 
                title: 'Pista & Tokyo', 
                location: '📍 東京車站 1F',
                desc: '開心果夾心餅乾，薄脆口感，開心果控必買。', 
                tags: ['伴手禮', '開心果'], 
                img: 'image/Pista & Tokyo.jpg' 
            },
            { 
                category: 'food', 
                title: 'Press Butter Sand', 
                location: '📍 成田機場、東京車站、澀谷',
                desc: '焦糖奶油夾心，推薦原味和伯爵茶口味。口感層次豐富。', 
                tags: ['伴手禮', '餅乾'], 
                img: 'image/Press Butter Sand.jpg' 
            },
            { 
                category: 'food', 
                title: 'Number Sugar', 
                location: '📍 表參道、代官山',
                desc: '手工牛奶糖，數字代表不同口味 (如No.2 鹽味)，包裝簡約有質感。', 
                tags: ['甜點', '牛奶糖'], 
                img: 'image/Number Sugar.jpg' 
            },
            { 
                category: 'food', 
                title: 'Henri Charpentier', 
                location: '📍 銀座本店、新宿伊勢丹 B1',
                desc: '金氏世界紀錄銷量第一的費南雪，經典法式甜點。', 
                tags: ['伴手禮', '費南雪'], 
                img: 'image/Henri Charpentier.jpg' 
            },
            { 
                category: 'food', 
                title: '7-11 藍莓馬卡龍冰', 
                location: '📍 7-11',
                desc: '超商神級甜點，馬卡龍夾藍莓冰淇淋，不甜膩。', 
                tags: ['超商', '冰品'], 
                img: 'image/7-11 藍莓馬卡龍冰.jpg' 
            },
            { 
                category: 'food', 
                title: '7-11 焦糖胡桃巧克力', 
                location: '📍 7-11',
                desc: 'Pecan Nut Chocolate，胡桃外裹巧克力，藍色包裝。', 
                tags: ['超商', '巧克力'], 
                img: 'image/7-11 焦糖胡桃巧克力.jpg' 
            },
            { 
                category: 'food', 
                title: '7-11 生巧克力冰淇淋', 
                location: '📍 7-11',
                desc: '方塊狀的生巧克力冰淇淋，濃郁好吃，巧克力控必吃。', 
                tags: ['超商', '冰品'], 
                img: 'image/7-11 生巧克力冰淇淋.jpg' 
            },
            { 
                category: 'food', 
                title: '7-11 麝香葡萄軟糖巧', 
                location: '📍 7-11',
                desc: '包著軟糖的巧克力球，麝香葡萄口味，口感特殊。', 
                tags: ['超商', '巧克力'], 
                img: 'image/7-11 麝香葡萄軟糖巧.jpg' 
            },
            { 
                category: 'food', 
                title: '7-11 帶皮薯條', 
                location: '📍 7-11',
                desc: '藍色包裝，口感酥脆的帶皮薯條餅乾。', 
                tags: ['超商', '零食'], 
                img: 'image/7-11 帶皮薯條.jpg' 
            },
            { 
                category: 'food', 
                title: 'QBB 草莓起司球', 
                location: '📍 超商、超市',
                desc: '像甜點一樣的起司，草莓口味，適合當小點心。', 
                tags: ['超商', '起司'], 
                img: 'image/QBB 草莓起司球.jpg' 
            },
            { 
                category: 'food', 
                title: 'Shake Shack 焙茶奶昔', 
                location: '📍 有樂町、外苑前、六本木',
                desc: '日本/東京限定口味，Roasted Green Tea Shake，茶味濃郁。', 
                tags: ['美食', '飲料'], 
                img: 'image/Shake Shack 焙茶奶昔.jpg' 
            },
            { 
                category: 'food', 
                title: '五代目 花山烏龍麵', 
                location: '📍 銀座店、日本橋店',
                desc: '超寬「鬼寬烏龍麵」，口感Q彈，排隊名店。', 
                tags: ['美食', '烏龍麵'], 
                img: 'image/五代目 花山烏龍麵.jpg' 
            },
            { 
                category: 'food', 
                title: '上野 山家炸豬排', 
                location: '📍 上野、御徒町',
                desc: '阿美橫町高CP值美食，肉厚多汁，排隊名店。', 
                tags: ['美食', '豬排'], 
                img: 'image/上野 山家炸豬排.jpg' 
            },
            { 
                category: 'food', 
                title: '淺草 炸牛排 (牛カツ)', 
                location: '📍 淺草雷門旁',
                desc: '牛カツ，外酥內嫩，可自己在石板上煎熟度。', 
                tags: ['美食', '牛肉'], 
                img: 'image/淺草 炸牛排 (牛カツ).jpg' 
            },
            { 
                category: 'food', 
                title: '月島文字燒', 
                location: '📍 澀谷 Scramble Square',
                desc: '明太子麻糬文字燒是必點。', 
                tags: ['美食', '文字燒'], 
                img: 'image/月島文字燒.jpg' 
            },
            { 
                category: 'food', 
                title: '利久牛舌', 
                location: '📍 成田機場 T3/T2、各大車站',
                desc: '離開日本前最後必吃，炭烤牛舌超香。', 
                tags: ['美食', '牛舌'], 
                img: 'image/利久牛舌.jpg' 
            },
            { 
                category: 'food', 
                title: 'Yellow Cafe', 
                location: '📍 池袋',
                desc: '漢堡排蛋包飯，醬汁濃郁，歐式風格咖啡廳。', 
                tags: ['美食', '早午餐'], 
                img: 'image/Yellow Cafe.jpg' 
            },
            { 
                category: 'food', 
                title: 'BLANCA 可麗餅', 
                location: '📍 麻布台之丘',
                desc: '餅皮有濃濃焦糖味，Ricotta 內餡像巴斯克流心，號稱最好吃可麗餅。', 
                tags: ['美食', '甜點'], 
                img: 'image/BLANCA 可麗餅.jpg' 
            },
            { 
                category: 'food', 
                title: '森永 BifiDus 優格', 
                location: '📍 超商、超市',
                desc: '被稱為「炸屎神器」，整腸效果強，比 R1 更有感。', 
                tags: ['超商', '優格'], 
                img: 'image/森永 BifiDus 優格.jpg' 
            },
            { 
                category: 'food', 
                title: 'Kirin 午後紅茶 (白)', 
                location: '📍 超商、販賣機',
                desc: 'The Creamy Tea，特濃奶茶，比一般版更濃郁好喝。', 
                tags: ['超商', '飲料'], 
                img: 'image/Kirin 午後紅茶 (白).jpg' 
            },
            { 
                category: 'food', 
                title: '高千穗牧場 和紅茶', 
                location: '📍 超商 (7-11/Lawson)',
                desc: '好喝的紅茶拿鐵，奶香濃郁。', 
                tags: ['超商', '飲料'], 
                img: 'image/高千穗牧場 和紅茶.jpg' 
            },
            { 
                category: 'food', 
                title: '銀座あけぼの 草莓大福', 
                location: '📍 銀座本店',
                desc: '整顆大草莓，紅豆餡甜而不膩。', 
                tags: ['甜點', '大福'], 
                img: 'image/銀座あけぼの 草莓大福.jpg' 
            },
            { 
                category: 'food', 
                title: 'Royce 巧克力', 
                location: '📍 機場免稅店',
                desc: '開心果巧克力棒、抹茶巧克力棒，機場必買。', 
                tags: ['伴手禮', '巧克力'], 
                img: 'image/Royce 巧克.jpg' 
            },
            { 
                category: 'food', 
                title: 'Kurakon 鹽昆布', 
                location: '📍 超市、唐吉訶德',
                desc: '部長包裝，配飯、炒菜、拌小黃瓜都好吃。', 
                tags: ['超市', '料理'], 
                img: 'image/Kurakon 鹽昆布.png' 
            },
            { 
                category: 'food', 
                title: 'Milk Shop Luck', 
                location: '📍 秋葉原站 總武線月台',
                desc: '大山乳業咖啡牛奶，各種日本各地好喝牛奶。', 
                tags: ['美食', '飲料'], 
                img: 'image/Milk Shop Luck.jpg' 
            },
            { 
                category: 'food', 
                title: '淺草 梅乾', 
                location: '📍 淺草仲見世通',
                desc: '木村拓哉也推薦的店，酸甜適中。', 
                tags: ['伴手禮', '梅乾'], 
                img: 'image/淺草 梅乾.jpg' 
            },
            { 
                category: 'food', 
                title: 'Kabaya TOUGH 軟糖', 
                location: '📍 超商、超市',
                desc: '口感超Q彈，水果口味濃厚。', 
                tags: ['零食', '軟糖'], 
                img: 'image/Kabaya TOUGH 軟糖.jpg' 
            },
            { 
                category: 'food', 
                title: '明治 Galbo x Meltykiss', 
                location: '📍 超商',
                desc: '2025秋冬限定焦糖口味，濃郁幸福感。', 
                tags: ['零食', '巧克力'], 
                img: 'image/明治 Galbo x Meltykiss.jpg' 
            },
            { 
                category: 'food', 
                title: '東丸 牡蠣醬油', 
                location: '📍 超市',
                desc: '煮菜神器，加一點就很鮮美。', 
                tags: ['超市', '調味'], 
                img: 'image/東丸 牡蠣醬油.jpg' 
            },
            { 
                category: 'food', 
                title: 'Horinishi (ほりにし) 戶外香料', 
                location: '📍 超市、Loft、戶外用品店',
                desc: '烤肉神器，萬用調味粉，有原味、辣味、黑松露味。', 
                tags: ['超市', '調味'], 
                img: 'image/Horinishi (ほりにし) 戶外香料.jpg' 
            },
            { 
                category: 'food', 
                title: '唐吉訶德 減鹽味噌湯', 
                location: '📍 唐吉訶德',
                desc: '12食入的大包裝，便宜好喝，還有海帶湯也是必囤。', 
                tags: ['超市', '湯品'], 
                img: 'image/唐吉訶德 減鹽味噌湯.jpg' 
            },
            { 
                category: 'food', 
                title: 'Acecook 蛤蜊鹽味拉麵', 
                location: '📍 超商、超市',
                desc: '湯頭鮮美，滿滿的蛤蜊鮮味。', 
                tags: ['超商', '泡麵'], 
                img: 'image/Acecook 蛤蜊鹽味拉麵.jpg' 
            },
            { 
                category: 'food', 
                title: 'LeTAO 雙層乳酪蛋糕', 
                location: '📍 百貨北海道展、機場',
                desc: '北海道必吃，入口即化，也有麝香葡萄口味。', 
                tags: ['甜點', '蛋糕'], 
                img: 'image/LeTAO 雙層乳酪蛋糕.jpg' 
            },
            { 
                category: 'food', 
                title: '治一郎 布丁', 
                location: '📍 大丸東京、品川 Ecute',
                desc: '大人系焦糖超濃布丁，口感綿密。', 
                tags: ['甜點', '布丁'], 
                img: 'image/治一郎 布丁.jpg' 
            },
            { 
                category: 'food', 
                title: 'Dolce Tacubo', 
                location: '📍 代官山',
                desc: '米其林一星餐廳甜點店，費南雪超好吃。', 
                tags: ['美食', '費南雪'], 
                img: 'image/Dolce Tacubo.jpg' 
            },

            // === 景點與其他 (Travel) ===
            { 
                category: 'travel', 
                title: '麻布台之丘 聖誕市集', 
                location: '📍 麻布台之丘',
                desc: '夢幻小木屋和燈飾，可拍東京鐵塔。', 
                tags: ['景點', '聖誕'], 
                img: 'image/麻布台之丘 聖誕市集.jpg' 
            },
            { 
                category: 'travel', 
                title: '六本木 櫸坂點燈', 
                location: '📍 六本木 Hills (Keyakizaka)',
                desc: '藍白燈海配東京鐵塔，絕美夜景。', 
                tags: ['景點', '夜景'], 
                img: 'image/六本木 櫸坂點燈.jpg' 
            },
            { 
                category: 'travel', 
                title: '東京中城 聖誕燈飾', 
                location: '📍 東京 Midtown (六本木)',
                desc: '有噴雪花和泡泡的夢幻造景。', 
                tags: ['景點', '夜景'], 
                img: 'image/東京中城 聖誕燈飾.jpg' 
            },
            { 
                category: 'travel', 
                title: 'KITTE 丸之內', 
                location: '📍 KITTE 6F 頂樓',
                desc: '免費觀景台，可拍東京車站全景，夜景無敵。', 
                tags: ['景點', '夜景'], 
                img: 'image/KITTE 丸之內.jpg' 
            },
            { 
                category: 'travel', 
                title: '丸之內大樓', 
                location: '📍 丸之內大樓 5F/35F',
                desc: '5F露台和35F觀景台，免費拍攝東京車站夜景。', 
                tags: ['景點', '夜景'], 
                img: 'image/丸之內大樓.jpg' 
            },
            { 
                category: 'travel', 
                title: '惠比壽花園廣場 38F', 
                location: '📍 惠比壽花園廣場 38F',
                desc: '免費觀景台，人少安靜，可拍鐵塔。', 
                tags: ['景點', '夜景'], 
                img: 'image/惠比壽花園廣場 38F.jpg' 
            },
            { 
                category: 'travel', 
                title: 'Sanrio Gift Gate 淺草', 
                location: '📍 淺草雷門旁',
                desc: '淺草有大Kitty，原宿店可以客製化刺繡。', 
                tags: ['購物', '三麗鷗'], 
                img: 'image/Sanrio Gift Gate 淺草.jpg' 
            },
            { 
                category: 'travel', 
                title: '今戶神社 (招財貓)', 
                location: '📍 淺草',
                desc: '招財貓發源地，求姻緣超靈驗。', 
                tags: ['神社', '淺草'], 
                img: 'image/今戶神社 (招財貓).jpg' 
            },
            { 
                category: 'travel', 
                title: '無印良品 梳子清潔刷', 
                location: '📍 無印良品',
                desc: '輕鬆清理梳子上纏繞的頭髮，實用小物。', 
                tags: ['生活', '無印'], 
                img: 'image/無印良品 梳子清潔刷.jpg' 
            },
            { 
                category: 'travel', 
                title: '無印良品 乾洗髮濕紙巾', 
                location: '📍 無印良品',
                desc: '夏天或流汗時超好用，擦完頭髮瞬間蓬鬆。', 
                tags: ['生活', '無印'], 
                img: 'image/無印良品 乾洗髮濕紙巾.jpg' 
            },
            { 
                category: 'travel', 
                title: 'Loft 富士山橡皮擦', 
                location: '📍 Loft',
                desc: '擦著擦著會變成富士山形狀。', 
                tags: ['文具', '伴手禮'], 
                img: 'image/Loft 富士山橡皮擦.jpg' 
            },
            { 
                category: 'travel', 
                title: 'Petemo 寵物店 (品川)', 
                location: '📍 AEON品川店 3F',
                desc: '推薦「無臭換便袋」，完全聞不到味道。', 
                tags: ['寵物', '必買'], 
                img: 'image/Petemo 寵物店 (品川).jpg' 
            },
            { 
                category: 'travel', 
                title: 'Petio 寵物電暖板', 
                location: '📍 寵物店、Amazon JP',
                desc: '雙面不同溫度，日本製，冬天毛小孩保暖神器。', 
                tags: ['寵物', '電器'], 
                img: 'image/Petio 寵物電暖板.jpg' 
            },
            { 
                category: 'travel', 
                title: '3COINS 微波料理盒', 
                location: '📍 3COINS',
                desc: '可微波的平底鍋造型，煎牛排、炒菜無油煙。', 
                tags: ['生活', '廚具'], 
                img: 'image/3COINS 微波料理盒.jpg' 
            },
            { 
                category: 'travel', 
                title: '3COINS 包包扣環', 
                location: '📍 3COINS',
                desc: '解放雙手！可以扣外套在包包上的好物。', 
                tags: ['生活', '小物'], 
                img: 'image/3COINS 包包扣環.jpg' 
            },
            { 
                category: 'travel', 
                title: '大猩猩腿部按摩器', 
                location: '📍 Bic Camera、Yodobashi',
                desc: 'Gorilla no Hitotsukami，強力氣壓按摩小腿。', 
                tags: ['電器', '按摩'], 
                img: 'image/大猩猩腿部按摩器.jpg' 
            }
        ];

        let currentSearch = '';

        function renderItems() {
            const categories = ['beauty', 'fashion', 'food', 'travel'];
            let totalVisible = 0;

            categories.forEach(cat => {
                document.getElementById(`${cat}-list`).innerHTML = '';
            });

            items.forEach((item) => {
                const matchesSearch = item.title.toLowerCase().includes(currentSearch) || 
                                      item.desc.toLowerCase().includes(currentSearch) || 
                                      item.location.toLowerCase().includes(currentSearch) ||
                                      item.tags.some(t => t.toLowerCase().includes(currentSearch));

                if (matchesSearch) {
                    totalVisible++;
                    
                    const card = `
                        <div class="card bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100 flex flex-col h-full cursor-pointer hover:shadow-md transition-shadow"
                             onclick="openModal('${item.title}', '${item.desc.replace(/'/g, "\\'")}', '${item.img}', '${getCategoryName(item.category)}', '${item.location}', '${item.tags.join(',')}')">
                            <div class="relative overflow-hidden">
                                <img src="${item.img}" alt="${item.title}" class="card-img" loading="lazy">
                            </div>
                            <div class="p-4 flex-1 flex flex-col">
                                <h3 class="font-bold text-gray-800 text-base mb-2 leading-snug">${item.title}</h3>
                                <p class="text-xs text-gray-500 mb-2 flex items-center">
                                    <i class="fa-solid fa-location-dot mr-1 text-pink-500"></i> ${item.location.split(' ')[1] || item.location}
                                </p>
                                <div class="flex flex-wrap gap-1 mt-auto">
                                    ${item.tags.slice(0,2).map(tag => `<span class="text-[10px] bg-gray-100 text-gray-500 px-2 py-1 rounded">#${tag}</span>`).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                    document.getElementById(`${item.category}-list`).innerHTML += card;
                }
            });

            document.getElementById('visible-count').innerText = totalVisible;
            const noResultsEl = document.getElementById('no-results');
            
            let hasAnyContent = false;
            categories.forEach(cat => {
                const list = document.getElementById(`${cat}-list`);
                if (list.children.length > 0) hasAnyContent = true;
            });

            if (!hasAnyContent) {
                noResultsEl.classList.remove('hidden');
            } else {
                noResultsEl.classList.add('hidden');
            }
        }

        function getCategoryName(cat) {
            const map = { 'beauty': '美妝藥妝', 'fashion': '服飾穿搭', 'food': '美食伴手禮', 'travel': '景點雜貨' };
            return map[cat];
        }

        function applyFilters() {
            currentSearch = document.getElementById('search-input').value.toLowerCase();
            const clearBtn = document.getElementById('clear-search');
            if(currentSearch) {
                clearBtn.classList.remove('hidden');
            } else {
                clearBtn.classList.add('hidden');
            }
            renderItems();
        }

        function resetSearch() {
            document.getElementById('search-input').value = '';
            applyFilters();
        }

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.nav-item[data-tab="${tabId}"]`).classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function openModal(title, desc, img, category, location, tags) {
            const modal = document.getElementById('modal');
            const panel = document.getElementById('modal-panel');
            
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-desc').innerText = desc;
            document.getElementById('modal-img').src = img;
            document.getElementById('modal-category-badge').innerText = category;
            document.getElementById('modal-location-text').innerText = location;
            
            const badge = document.getElementById('modal-category-badge');
            if (category === '美妝藥妝') badge.className = 'inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-pink-100 text-pink-700';
            else if (category === '服飾穿搭') badge.className = 'inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-indigo-100 text-indigo-700';
            else if (category === '美食伴手禮') badge.className = 'inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-700';
            else badge.className = 'inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-emerald-100 text-emerald-700';

            const tagsHtml = tags.split(',').map(tag => 
                `<span class="bg-black/30 text-white text-xs px-2 py-1 rounded backdrop-blur-md border border-white/20">#${tag}</span>`
            ).join('');
            document.getElementById('modal-tags').innerHTML = tagsHtml;

            modal.classList.remove('hidden');
            setTimeout(() => {
                panel.classList.remove('opacity-0', 'scale-95');
                panel.classList.add('scale-100');
            }, 10);
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            const panel = document.getElementById('modal-panel');
            
            panel.classList.remove('scale-100');
            panel.classList.add('opacity-0', 'scale-95');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }

        window.onload = function() {
            renderItems();
        };
    </script>
</body>
</html>




